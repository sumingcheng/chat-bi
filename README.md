# Chat-BI

ğŸ¤– **æ™ºèƒ½å•†ä¸šæ•°æ®åˆ†æå¯¹è¯ç³»ç»Ÿ** - ä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®ï¼Œè®©æ•°æ®åˆ†æå˜å¾—ç®€å•ç›´è§‚ï¼

## âœ¨ é¡¹ç›®ç‰¹è‰²

- ğŸ—£ï¸ **è‡ªç„¶è¯­è¨€æŸ¥è¯¢**ï¼šç”¨æ™®é€šè¯æè¿°éœ€æ±‚ï¼Œè‡ªåŠ¨ç”ŸæˆSQLæŸ¥è¯¢
- ğŸ“Š **æ™ºèƒ½å¯è§†åŒ–**ï¼šåŸºäºEChartsçš„åŠ¨æ€å›¾è¡¨å±•ç¤ºï¼Œæ”¯æŒæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ç­‰å¤šç§ç±»å‹
- ğŸ§  **AIé©±åŠ¨**ï¼šé›†æˆOpenAI APIï¼Œæä¾›æ™ºèƒ½SQLç”Ÿæˆå’Œè‡ªç„¶è¯­è¨€è§£ç­”
- ğŸ” **å‘é‡æœç´¢**ï¼šåŸºäºMilvusçš„ç›¸ä¼¼æŸ¥è¯¢æ¨¡æ¿åŒ¹é…ï¼Œæå‡å“åº”é€Ÿåº¦
- ğŸ›¡ï¸ **å®‰å…¨å¯é **ï¼šSQLå®‰å…¨éªŒè¯ï¼Œé˜²æ­¢å±é™©æ“ä½œ
- ğŸ“± **ç°ä»£åŒ–UI**ï¼šåŸºäºReact + TypeScript + Tailwind CSSçš„å“åº”å¼ç•Œé¢

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
Frontend (React + TypeScript)
    â†“
Backend API (FastAPI + Python)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Business DB    â”‚   System DB     â”‚
â”‚   (MySQL)       â”‚   (MySQL)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
Vector Database (Milvus)
    â†“
AI Services (OpenAI)
```

![æ¶æ„å›¾](images/chat-bi.svg)

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

**åç«¯**ï¼šPython 3.10+ Â· FastAPI Â· SQLAlchemy Â· PyMilvus Â· OpenAI

**å‰ç«¯**ï¼šReact 19 Â· TypeScript Â· Tailwind CSS Â· ECharts Â· Vite

**å­˜å‚¨**ï¼šMySQL Â· Milvus

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python 3.10+**
- **Node.js 18+**
- **MySQL 8.0+**
- **Milvus 2.3+**
- **OpenAI API Key**

### ğŸ³ Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/sumingcheng/chat-bi.git
cd chat-bi
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶å¹¶ç¼–è¾‘ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
```bash
cp .env-temp .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®å¿…è¦å‚æ•°ï¼š
```env
# æ•°æ®åº“é…ç½®
DB_HOST=mysql
DB_PORT=3306
DB_USER=root
DB_PASSWORD=admin123456
DB_NAME=chat_bi

# Milvusé…ç½®
MILVUS_HOST=milvus
MILVUS_PORT=19530

# OpenAIé…ç½®
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1

# ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
HTTP_PROXY=
HTTPS_PROXY=

# å‘é‡åŒ–æ¨¡å‹é…ç½®
EMBEDDING_API_URL=http://localhost:11434/api/embeddings
EMBEDDING_MODEL=nomic-embed-text
```

#### 3. å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨åŸºç¡€æœåŠ¡ï¼ˆMySQL + Milvusï¼‰
docker-compose -f deploy/docker-compose-base.yaml up -d

# å¯åŠ¨åº”ç”¨æœåŠ¡
docker-compose -f deploy/docker-compose.yaml up -d
```

### ğŸ’» æœ¬åœ°å¼€å‘

#### åç«¯å¼€å‘
```bash
# å®‰è£…ä¾èµ–
uv sync

# å¯åŠ¨åç«¯æœåŠ¡
python main.py
```

```bash
 âš¡ root@DESKTOP-AETE0Q9 î‚° /data/chat-bi î‚° î‚  main î‚° docker logs -f f341b3959a99
INFO:     Will watch for changes in these directories: ['/chat-bi']
INFO:     Uvicorn running on http://0.0.0.0:13000 (Press CTRL+C to quit)
INFO:     Started reloader process [1] using StatReload
INFO:     Started server process [8]
INFO:     Waiting for application startup.
2025-06-03 04:01:07 [INFO] app:57 - ğŸš€ åº”ç”¨å¯åŠ¨ä¸­...
2025-06-03 04:01:07 [INFO] app:58 - ğŸ“Š å¼€å§‹æ£€æŸ¥æ•°æ®åº“è¡¨çŠ¶æ€...
2025-06-03 04:01:07 [INFO] app:39 - âœ“ ä¸šåŠ¡æ•°æ®åº“è¡¨ 'category' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:39 - âœ“ ä¸šåŠ¡æ•°æ®åº“è¡¨ 'customer' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:39 - âœ“ ä¸šåŠ¡æ•°æ®åº“è¡¨ 'product' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:39 - âœ“ ä¸šåŠ¡æ•°æ®åº“è¡¨ 'sales_order' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:39 - âœ“ ä¸šåŠ¡æ•°æ®åº“è¡¨ 'order_item' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:39 - âœ“ ä¸šåŠ¡æ•°æ®åº“è¡¨ 'sales' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:49 - âœ“ ç³»ç»Ÿæ•°æ®åº“è¡¨ 'sql_templates' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:49 - âœ“ ç³»ç»Ÿæ•°æ®åº“è¡¨ 'sql_template_params' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:49 - âœ“ ç³»ç»Ÿæ•°æ®åº“è¡¨ 'query_history' å·²å­˜åœ¨
2025-06-03 04:01:07 [INFO] app:63 - ğŸ“Š å¼€å§‹åˆå§‹åŒ–æ•°æ®åº“è¡¨...
2025-06-03 04:01:07 [INFO] app:68 - å¼€å§‹åˆå§‹åŒ–ä¸šåŠ¡æ•°æ®åº“è¡¨: ['category', 'customer', 'product', 'sales_order', 'order_item', 'sales']
2025-06-03 04:01:07 [INFO] app:71 - ä¸šåŠ¡æ•°æ®åº“è¡¨åˆå§‹åŒ–å®Œæˆ
2025-06-03 04:01:07 [INFO] app:68 - å¼€å§‹åˆå§‹åŒ–ç³»ç»Ÿæ•°æ®åº“è¡¨: ['sql_templates', 'sql_template_params', 'query_history']
2025-06-03 04:01:07 [INFO] app:71 - ç³»ç»Ÿæ•°æ®åº“è¡¨åˆå§‹åŒ–å®Œæˆ
2025-06-03 04:01:07 [INFO] app:71 - âœ… æ•°æ®åº“è¡¨åˆå§‹åŒ–å®Œæˆ
2025-06-03 04:01:07 [INFO] app:72 - ğŸ‰ Chat-BI API å¯åŠ¨æˆåŠŸï¼
INFO:     Application startup complete.
```

#### å‰ç«¯å¼€å‘
```bash
cd web

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## ğŸŒ è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œæ‚¨å¯ä»¥è®¿é—®ï¼š

- **Chat-BIä¸»åº”ç”¨**ï¼šhttp://localhost:3000
- **åç«¯APIæ–‡æ¡£**ï¼šhttp://localhost:8000/docs
- **Milvusç®¡ç†ç•Œé¢**ï¼šhttp://localhost:19000

## ğŸ¯ åŠŸèƒ½ç‰¹è‰²

### ğŸ’¬ æ™ºèƒ½å¯¹è¯æŸ¥è¯¢
- **è‡ªç„¶è¯­è¨€ç†è§£**ï¼šæ”¯æŒä¸­æ–‡ä¸šåŠ¡æŸ¥è¯¢æè¿°
- **æŸ¥è¯¢ç¤ºä¾‹**ï¼šå†…ç½®10+å¸¸ç”¨ä¸šåŠ¡æŸ¥è¯¢æ¨¡æ¿
- **ä¸€é”®æŸ¥è¯¢**ï¼šç‚¹å‡»ç¤ºä¾‹å³å¯å¿«é€Ÿå¼€å§‹

### ğŸ“ˆ æ•°æ®å¯è§†åŒ–
- **æ™ºèƒ½å›¾è¡¨æ¨è**ï¼šæ ¹æ®æ•°æ®ç‰¹å¾è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç±»å‹
- **å¤šç§å›¾è¡¨æ”¯æŒ**ï¼šæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ã€è¡¨æ ¼ç­‰
- **äº¤äº’å¼å›¾è¡¨**ï¼šæ”¯æŒç¼©æ”¾ã€ç­›é€‰ã€å¯¼å‡ºç­‰æ“ä½œ

### ğŸ” æ¨¡æ¿å­¦ä¹ 
- **å‘é‡ç›¸ä¼¼åº¦åŒ¹é…**ï¼šåŸºäºMilvusçš„è¯­ä¹‰æœç´¢
- **è‡ªåŠ¨æ¨¡æ¿ç”Ÿæˆ**ï¼šæˆåŠŸæŸ¥è¯¢è‡ªåŠ¨ä¿å­˜ä¸ºæ¨¡æ¿
- **å‚æ•°æ™ºèƒ½æå–**ï¼šAIè¾…åŠ©çš„æŸ¥è¯¢å‚æ•°è§£æ

### ğŸ›¡ï¸ å®‰å…¨ä¿éšœ
- **SQLæ³¨å…¥é˜²æŠ¤**ï¼šä¸¥æ ¼çš„SQLå®‰å…¨éªŒè¯
- **åªè¯»æŸ¥è¯¢**ï¼šä»…å…è®¸SELECTæ“ä½œ
- **å‚æ•°éªŒè¯**ï¼šå®Œæ•´çš„è¾“å…¥å‚æ•°æ ¡éªŒ

## ğŸ§ª æµ‹è¯•æ•°æ®

é¡¹ç›®æä¾›äº†æµ‹è¯•æ•°æ®ç”Ÿæˆå·¥å…·ï¼š

```bash
# ç”Ÿæˆæµ‹è¯•æ•°æ®
python test/generate_test_data.py

# è¿è¡Œæµ‹è¯•æŸ¥è¯¢
python test/run_test_data.py
```

## è¿è¡Œæ•ˆæœ

### ğŸ“Š æ•°æ®å¯è§†åŒ–å±•ç¤º
**é¦–é¡µ**
![é¦–é¡µ](images/index.png)

**é¥¼å›¾æ•ˆæœ**ï¼šæŒ‰æœˆå®¢æˆ·æ³¨å†Œæ•°é‡åˆ†å¸ƒ
![é¥¼å›¾æ•ˆæœ](images/pie.png)

**æŠ˜çº¿å›¾æ•ˆæœ**ï¼šæœ€è¿‘30å¤©é”€å”®é¢è¶‹åŠ¿åˆ†æ
![æŠ˜çº¿å›¾æ•ˆæœ](images/line.png)

- ğŸ¯ **æ™ºèƒ½æŸ¥è¯¢**ï¼šæ”¯æŒè‡ªç„¶è¯­è¨€æè¿°ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”SQL
- ğŸ“ˆ **åŠ¨æ€å›¾è¡¨**ï¼šåŸºäºEChartsçš„äº¤äº’å¼å¯è§†åŒ–å±•ç¤º
- ğŸ’¡ **ä¸€é”®ç¤ºä¾‹**ï¼šå†…ç½®å¸¸ç”¨æŸ¥è¯¢æ¨¡æ¿ï¼Œå¿«é€Ÿä¸Šæ‰‹ä½“éªŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å‚ä¸æ–¹å¼

1. **Fork é¡¹ç›®**ï¼šç‚¹å‡»å³ä¸Šè§’ Fork æŒ‰é’®
2. **åˆ›å»ºåˆ†æ”¯**ï¼š`git checkout -b feature/your-feature`
3. **æäº¤æ›´æ”¹**ï¼š`git commit -am "Add your feature"`
4. **æ¨é€åˆ†æ”¯**ï¼š`git push origin feature/your-feature`
5. **æäº¤PR**ï¼šåˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ

- **ä»£ç è§„èŒƒ**ï¼šéµå¾ªPEP 8ï¼ˆPythonï¼‰å’ŒPrettierï¼ˆTypeScriptï¼‰
- **æäº¤ä¿¡æ¯**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–æäº¤æ ¼å¼
- **æµ‹è¯•è¦†ç›–**ï¼šæ–°åŠŸèƒ½éœ€è¦å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹

## ğŸ› é—®é¢˜åé¦ˆ

é‡åˆ°é—®é¢˜ï¼Ÿæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆï¼š

- **GitHub Issues**ï¼š[æäº¤Issue](https://github.com/sumingcheng/chat-bi/issues)
- **åŠŸèƒ½å»ºè®®**ï¼š[è®¨è®ºåŒº](https://github.com/sumingcheng/chat-bi/discussions)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **Apache License 2.0** è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- **[Milvus](https://milvus.io/)** - é«˜æ€§èƒ½å‘é‡æ•°æ®åº“
- **[FastAPI](https://fastapi.tiangolo.com/)** - ç°ä»£åŒ–Python Webæ¡†æ¶  
- **[React](https://reactjs.org/)** - ç”¨æˆ·ç•Œé¢æ„å»ºåº“
- **[ECharts](https://echarts.apache.org/)** - å¼ºå¤§çš„æ•°æ®å¯è§†åŒ–åº“
- **[Tailwind CSS](https://tailwindcss.com/)** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶

## ğŸ“ è”ç³»æ–¹å¼

- **ä½œè€…**ï¼š[sumingcheng](https://github.com/sumingcheng)
- **é‚®ç®±**ï¼šé€šè¿‡GitHub Issuesè”ç³»
- **é¡¹ç›®ä¸»é¡µ**ï¼šhttps://github.com/sumingcheng/chat-bi

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼
